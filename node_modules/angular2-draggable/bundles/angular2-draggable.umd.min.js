!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],e):e(t["angular2-draggable"]={},t.ng.core)}(this,function(t,e){"use strict";var n=function(){function t(t,e){this.x=t,this.y=e}return t.fromEvent=function(e){return new t(e.clientX,e.clientY)},t.isIPosition=function(t){return!!t&&"x"in t&&"y"in t},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.reset=function(){return this.x=0,this.y=0,this},t.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},t}(),i=function(){function t(t,i){this.el=t,this.renderer=i,this.allowDrag=!0,this.moving=!1,this.orignal=null,this.oldTrans=new n(0,0),this.tempTrans=new n(0,0),this.oldZIndex="",this.oldPosition="",this._zIndex="",this.needTransform=!1,this.started=new e.EventEmitter,this.stopped=new e.EventEmitter,this.edge=new e.EventEmitter,this.inBounds=!1,this.trackPosition=!0,this.scale=1,this.preventDefaultEvent=!1,this.position={x:0,y:0},this.movingOffset=new e.EventEmitter,this.endOffset=new e.EventEmitter}return Object.defineProperty(t.prototype,"zIndex",{set:function(t){this.renderer.setStyle(this.el.nativeElement,"z-index",t),this._zIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngDraggable",{set:function(t){if(t!==undefined&&null!==t&&""!==t){this.allowDrag=!!t;var e=this.handle?this.handle:this.el.nativeElement;this.allowDrag?this.renderer.addClass(e,"ng-draggable"):this.renderer.removeClass(e,"ng-draggable")}},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){if(this.allowDrag){var t=this.handle?this.handle:this.el.nativeElement;this.renderer.addClass(t,"ng-draggable")}this.resetPosition()},t.prototype.ngOnChanges=function(t){if(t.position&&!t.position.isFirstChange()){var e=t.position.currentValue;this.moving?this.needTransform=!0:(n.isIPosition(e)?this.oldTrans.set(e):this.oldTrans.reset(),this.transform())}},t.prototype.resetPosition=function(){n.isIPosition(this.position)?this.oldTrans.set(this.position):this.oldTrans.reset(),this.tempTrans.reset(),this.transform()},t.prototype.moveTo=function(t){this.orignal&&(t.subtract(this.orignal),this.tempTrans.set(t),this.transform(),this.bounds&&this.edge.emit(this.boundsCheck()),this.movingOffset.emit({x:this.tempTrans.x+this.oldTrans.x,y:this.tempTrans.y+this.oldTrans.y}))},t.prototype.transform=function(){var t="translate("+(this.tempTrans.x+this.oldTrans.x)+"px, "+(this.tempTrans.y+this.oldTrans.y)+"px)";1!==this.scale&&(t+=" scale("+this.scale+")"),this.renderer.setStyle(this.el.nativeElement,"transform",t),this.renderer.setStyle(this.el.nativeElement,"-webkit-transform",t),this.renderer.setStyle(this.el.nativeElement,"-ms-transform",t),this.renderer.setStyle(this.el.nativeElement,"-moz-transform",t),this.renderer.setStyle(this.el.nativeElement,"-o-transform",t)},t.prototype.pickUp=function(){this.oldZIndex=this.el.nativeElement.style.zIndex?this.el.nativeElement.style.zIndex:"",window&&(this.oldZIndex=window.getComputedStyle(this.el.nativeElement,null).getPropertyValue("z-index")),this.zIndexMoving&&this.renderer.setStyle(this.el.nativeElement,"z-index",this.zIndexMoving),this.moving||(this.started.emit(this.el.nativeElement),this.moving=!0)},t.prototype.boundsCheck=function(){if(this.bounds){var t=this.bounds.getBoundingClientRect(),e=this.el.nativeElement.getBoundingClientRect(),n={top:t.top<e.top,right:t.right>e.right,bottom:t.bottom>e.bottom,left:t.left<e.left};return this.inBounds&&(n.top||(this.tempTrans.y-=e.top-t.top),n.bottom||(this.tempTrans.y-=e.bottom-t.bottom),n.right||(this.tempTrans.x-=e.right-t.right),n.left||(this.tempTrans.x-=e.left-t.left),this.transform()),n}},t.prototype.putBack=function(){this._zIndex?this.renderer.setStyle(this.el.nativeElement,"z-index",this._zIndex):this.zIndexMoving&&(this.oldZIndex?this.renderer.setStyle(this.el.nativeElement,"z-index",this.oldZIndex):this.el.nativeElement.style.removeProperty("z-index")),this.moving&&(this.stopped.emit(this.el.nativeElement),this.needTransform&&(n.isIPosition(this.position)?this.oldTrans.set(this.position):this.oldTrans.reset(),this.transform(),this.needTransform=!1),this.bounds&&this.edge.emit(this.boundsCheck()),this.moving=!1,this.endOffset.emit({x:this.tempTrans.x+this.oldTrans.x,y:this.tempTrans.y+this.oldTrans.y}),this.trackPosition&&this.oldTrans.add(this.tempTrans),this.tempTrans.reset(),this.trackPosition||this.transform())},t.prototype.onMouseDown=function(t){2===t.button||this.handle!==undefined&&!this.checkHandleTarget(t.target,this.handle)||(this.preventDefaultEvent&&(t.stopPropagation(),t.preventDefault()),this.orignal=n.fromEvent(t),this.pickUp())},t.prototype.checkHandleTarget=function(t,e){if("BUTTON"===e.tagName)return!1;if(e===t)return!0;for(var n in e.children)if(e.children.hasOwnProperty(n)&&this.checkHandleTarget(t,e.children[n]))return!0;return!1},t.prototype.onMouseUp=function(){this.putBack()},t.prototype.onMouseLeave=function(){this.putBack()},t.prototype.onMouseMove=function(t){this.moving&&this.allowDrag&&(this.preventDefaultEvent&&(t.stopPropagation(),t.preventDefault()),this.moveTo(n.fromEvent(t)))},t.prototype.onTouchEnd=function(){this.putBack()},t.prototype.onTouchStart=function(t){(this.handle===undefined||this.checkHandleTarget(t.target,this.handle))&&(this.preventDefaultEvent&&(t.stopPropagation(),t.preventDefault()),this.orignal=n.fromEvent(t.changedTouches[0]),this.pickUp())},t.prototype.onTouchMove=function(t){this.moving&&this.allowDrag&&(this.preventDefaultEvent&&(t.stopPropagation(),t.preventDefault()),this.moveTo(n.fromEvent(t.changedTouches[0])))},t}();i.decorators=[{type:e.Directive,args:[{selector:"[ngDraggable]",exportAs:"ngDraggable"}]}],i.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2}]},i.propDecorators={started:[{type:e.Output}],stopped:[{type:e.Output}],edge:[{type:e.Output}],handle:[{type:e.Input}],bounds:[{type:e.Input}],zIndexMoving:[{type:e.Input}],zIndex:[{type:e.Input}],inBounds:[{type:e.Input}],trackPosition:[{type:e.Input}],scale:[{type:e.Input}],preventDefaultEvent:[{type:e.Input}],position:[{type:e.Input}],movingOffset:[{type:e.Output}],endOffset:[{type:e.Output}],ngDraggable:[{type:e.Input}],onMouseDown:[{type:e.HostListener,args:["mousedown",["$event"]]}],onMouseUp:[{type:e.HostListener,args:["document:mouseup"]}],onMouseLeave:[{type:e.HostListener,args:["document:mouseleave"]}],onMouseMove:[{type:e.HostListener,args:["document:mousemove",["$event"]]}],onTouchEnd:[{type:e.HostListener,args:["document:touchend"]}],onTouchStart:[{type:e.HostListener,args:["touchstart",["$event"]]}],onTouchMove:[{type:e.HostListener,args:["document:touchmove",["$event"]]}]};var s=function(){return function(){}}();s.decorators=[{type:e.NgModule,args:[{declarations:[i],exports:[i]}]}],s.ctorParameters=function(){return[]},t.AngularDraggableModule=s,t.AngularDraggableDirective=i,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular2-draggable.umd.min.js.map
